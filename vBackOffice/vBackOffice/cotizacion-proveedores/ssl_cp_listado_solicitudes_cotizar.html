<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SSL v4.0 - Listado de Solicitudes para Cotizar</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- CSS del menú reutilizable -->
    <link rel="stylesheet" href="../css/ssl-menu.css">
    <link rel="stylesheet" href="../css/ssl-general.css">

    <!-- CSS del menú especifico -->        
    <link rel="stylesheet" href="../css/ssl-cp-listado-solicitudes-cotizar.css">

</head>
<body>
    <!-- Contenedor del menú - Se carga dinámicamente -->
    <div id="menu-container"></div>
    
    <!-- Contenido principal -->
    <main class="content" style="margin-left: var(--menu-width);">
        <!-- Breadcrumb -->
        <div class="breadcrumb">
            <div class="breadcrumb-item"><a href="../inicio/ssl_menu.html">Inicio</a></div>
            <div class="breadcrumb-item">Cotización a Proveedores</div>
            <div class="breadcrumb-item active">Generación y Distribución</div>
        </div>

        <!-- Page Header -->
        <div class="page-header">
            <h1 class="page-title">Solicitudes de Pedido para Cotizar</h1>
            <div class="header-actions">
                <button class="btn btn-success" onclick="window.location.href='ssl_crear_solicitud_cotizacion.html?mode=new'">
                    <i class="fas fa-plus"></i> Nueva Cotización
                </button>
                <!--div class="view-toggle">
                    <button class="active" onclick="switchView('table')" title="Vista de tabla">
                        <i class="fas fa-list"></i>
                    </button>
                    <button onclick="switchView('card')" title="Vista de tarjetas">
                        <i class="fas fa-th-large"></i>
                    </button>
                </div-->
            </div>
        </div>

        <!-- Filters -->
        <div class="filter-container">
            <h2 class="filter-title">
                <i class="fas fa-filter"></i>
                Filtros de Búsqueda
            </h2>
            
            <div class="filter-grid">
                <div class="form-group">
                    <label for="docReferencia">Doc. Referencia</label>
                    <input type="text" id="docReferencia" class="form-control" placeholder="Ej: SOLPED-2025-001">
                </div>
                
                <div class="form-group">
                    <label for="cliente">Cliente</label>
                    <select id="cliente" class="form-control">
                        <option value="">Todos los clientes</option>
                        <option value="CONSTRUCTORA ALMAGRO S.A.">CONSTRUCTORA ALMAGRO S.A.</option>
                        <option value="INMOBILIARIA INGEVEC">INMOBILIARIA INGEVEC</option>
                        <option value="CONSTRUCTORA MOLLER Y PÉREZ-COTAPOS">CONSTRUCTORA MOLLER Y PÉREZ-COTAPOS</option>
                        <option value="CONSTRUCTORA SOCOVESA">CONSTRUCTORA SOCOVESA</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="obra">Obra</label>
                    <select id="obra" class="form-control">
                        <option value="">Todas las obras</option>
                        <option value="EDIFICIO PACIFIC BLUE">EDIFICIO PACIFIC BLUE</option>
                        <option value="TORRE ALMAGRO">TORRE ALMAGRO</option>
                        <option value="CONDOMINIO VISTA MAR">CONDOMINIO VISTA MAR</option>
                        <option value="EDIFICIO PARK TOWER">EDIFICIO PARK TOWER</option>
                        <option value="EDIFICIO CENTRAL PARK">EDIFICIO CENTRAL PARK</option>
                        <option value="PROYECTO LAS CONDES">PROYECTO LAS CONDES</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="estado">Estado</label>
                    <select id="estado" class="form-control">
                        <option value="">Todos los estados</option>
                        <option value="pendiente">Pendiente de Cotización</option>
                        <option value="parcial">Cotización Parcial</option>
                        <option value="completa">Cotización Completa</option>
                        <option value="anulada">Anulada</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="fechaDesde">Fecha Desde</label>
                    <input type="date" id="fechaDesde" class="form-control">
                </div>
            </div>
            
            <div class="filter-actions">
                <button type="button" class="btn btn-outline" onclick="limpiarFiltros()">
                    <i class="fas fa-times"></i> Limpiar
                </button>
                <button type="button" class="btn btn-primary" onclick="buscarSolicitudes()">
                    <i class="fas fa-search"></i> Buscar
                </button>
                <button type="button" class="btn btn-success" onclick="exportarDatos('excel')">
                    <i class="fas fa-file-excel"></i> Exportar
                </button>
            </div>
        </div>

        <!-- Results -->
        <div class="results-container">
            <div class="results-header">
                <div>
                    <h2 class="results-title">
                        <i class="fas fa-list"></i>
                        Listado de Solicitudes
                    </h2>
                    <div class="results-count">Mostrando 8 de 8 solicitudes</div>
                </div> 
            </div>

            <!-- Loading -->
            <div class="loading" id="loading" style="display: none;">
                <div class="spinner"></div>
                <p>Cargando solicitudes...</p>
            </div>

            <!-- Table View -->
            <div id="tableView" class="table-view">
                <div class="table-responsive">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Nro. Solicitud</th>
                                <th>Ver.</th>
                                <th>Cliente</th>
                                <th>Obra</th>
                                <th>Doc. Referencia</th>
                                <th>Fecha Recep.</th>
                                <th>Sol. Env.</th>
                                <th>Sol. Rec.</th>
                                <th>Monto Ref.</th>
                                <th>Estado</th>
                                <th>Fecha Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                            <!-- Los datos se cargarán dinámicamente -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Card View -->
            <div id="cardView" class="card-view" style="display: none;">
                <!-- Las tarjetas se cargarán dinámicamente -->
            </div>

            <!-- Empty State -->
            <div id="emptyState" class="empty-state" style="display: none;">
                <i class="fas fa-inbox"></i>
                <h3>No se encontraron solicitudes</h3>
                <p>Intenta ajustar los filtros de búsqueda</p>
            </div>
        </div>
    </main>

    <!-- Script del componente del menú -->
    <script src="../js/menu-component.js"></script>
    
    <!-- Script específico de esta página -->
    <script src="../js/ssl-cp-listado-solicitudes-cotizar.js"></script>
    
    <!-- Inicializar -->
    <script>
        // Cargar el menú con la sección y elemento activos
        SSLMenu.load('cotizacion-proveedores', 'generacion-distribucion');
    </script>
</body>
</html>