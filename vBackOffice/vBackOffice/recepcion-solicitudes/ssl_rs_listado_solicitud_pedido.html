<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SSL v4.0 - Listado de Solicitudes de Pedido</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- CSS del menú reutilizable -->
    <link rel="stylesheet" href="../css/ssl-menu.css">
    <link rel="stylesheet" href="../css/ssl-general.css">
    
    <!-- CSS específico de esta página -->
    <link rel="stylesheet" href="../css/ssl-rs-listado-solicitud.css">
    <link rel="stylesheet" href="../css/ssl-cp-listado-solicitudes-cotizar.css">    
</head>
<body>
    <!-- El menú se carga dinámicamente aquí -->
    <div id="menu-container"></div>

    <!-- CONTENIDO ESPECÍFICO DE LA PÁGINA -->
    <main class="content" style="margin-left: var(--menu-width);">
        <!-- Breadcrumb -->        
        <div class="breadcrumb">
            <div class="breadcrumb-item"><a href="../inicio/ssl_menu.html">Inicio</a></div>
            <div class="breadcrumb-item"><a href="#">Recepción de Solicitudes</a></div>
            <div class="breadcrumb-item active">Listado de Solicitudes</div>
        </div>

        <!-- Page Header -->
        <div class="page-header">
            <h1 class="page-title">Listado de Solicitudes de Pedido</h1>
            <div class="header-actions">
                <button class="btn btn-success" onclick="nuevaSolicitud()">
                    <i class="fas fa-plus"></i> Nueva Solicitud
                </button>
            </div>
        </div>
        
        <!-- Sección de Filtros -->
        <div class="filter-container">
            <h2 class="filter-title">
                <i class="fas fa-filter"></i>
                Filtros de Búsqueda
            </h2>
            
            <div class="filters-grid">
                <div class="form-group">
                    <label for="filterDocRef">Doc. Referencia</label>
                    <input type="text" id="filterDocRef" class="form-control" placeholder="Ej: SOLPED-2025-001">
                </div>
                
                <div class="form-group">
                    <label for="filterCliente">Cliente</label>
                    <select id="filterCliente" class="form-control">
                        <option value="">Todos los clientes</option>
                        <option value="76123456-K">CONSTRUCTORA ALMAGRO S.A.</option>
                        <option value="76234567-8">INMOBILIARIA INGEVEC</option>
                        <option value="76345678-9">CONSTRUCTORA MOLLER Y PÉREZ-COTAPOS</option>
                        <option value="76456789-0">CONSTRUCTORA SOCOVESA</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="filterObra">Obra</label>
                    <select id="filterObra" class="form-control">
                        <option value="">Todas las obras</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="filterEstado">Estado</label>
                    <select id="filterEstado" class="form-control">
                        <option value="">Todos los estados</option>
                        <option value="nuevo">Nuevo</option>
                        <option value="cotizando">Cotizando</option>
                        <option value="cotizada">Cotizada</option>
                        <option value="aprobada">Aprobada</option>
                        <option value="rechazada">Rechazada</option>
                        <option value="oc-generada">OC Generada</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="filterFechaDesde">Fecha Desde</label>
                    <input type="date" id="filterFechaDesde" class="form-control">
                </div>
            </div>
            
            <div class="filter-actions">
                <button type="button" class="btn btn-outline" onclick="limpiarFiltros()">
                    <i class="fas fa-times"></i> Limpiar
                </button>
                <button type="button" class="btn btn-primary" onclick="aplicarFiltros()">
                    <i class="fas fa-search"></i> Buscar
                </button>
                <button type="button" class="btn btn-success" onclick="exportarDatos('excel')">
                    <i class="fas fa-file-excel"></i> Exportar
                </button>                
            </div>
        </div>

        <!-- Results -->
        <div class="results-container">
            <div class="results-header">
                <div>
                    <h2 class="results-title">
                        <i class="fas fa-list"></i>
                        Listado de Solicitudes
                    </h2>
                    <div class="results-count">Mostrando 8 de 8 solicitudes</div>
                </div>                 
            </div>

            <!-- Loading -->
            <div class="loading" id="loading" style="display: none;">
                <div class="spinner"></div>
                <p>Cargando solicitudes...</p>
            </div>

            <!-- Acciones del listado -->
            <div class="list-actions">
                <div class="view-options">
                    <span style="margin-right: 10px;">Vista:</span>
                    <div class="view-toggle">
                        <button class="active" onclick="cambiarVista('tabla')">
                            <i class="fas fa-list"></i> Lista
                        </button>
                        <button onclick="cambiarVista('tarjetas')">
                            <i class="fas fa-th-large"></i> Tarjetas
                        </button>
                    </div>
                </div>        
            </div>

            <!-- Vista de tabla -->
            <div id="tablaView" class="table-wrapper">
                <table class="solicitudes-table">
                    <thead>
                        <tr>
                            <th>Nro. Solicitud</th>
                            <th>Versión</th>
                            <th>Cliente</th>
                            <th>Obra</th>
                            <th>Doc. Referencia</th>
                            <th>Fecha Recepción</th>
                            <th>Monto</th>
                            <th>Estado</th>
                            <th>Fecha Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="tablaSolicitudes">
                        <!-- Los datos se cargarán dinámicamente -->
                    </tbody>
                </table>
            </div>

            <!-- Vista de tarjetas -->
            <div id="tarjetasView" class="cards-view">
                <!-- Las tarjetas se cargarán dinámicamente -->
            </div>

            <!-- Estado vacío -->
            <div id="emptyState" class="empty-state" style="display: none;">
                <i class="fas fa-clipboard-list"></i>
                <h3>No hay solicitudes registradas</h3>
                <p>Comienza creando una nueva solicitud de pedido</p>
                <button class="btn btn-success" onclick="nuevaSolicitud()">
                    <i class="fas fa-plus"></i> Crear Nueva Solicitud
                </button>
            </div>

            <!-- Paginación -->
            <div class="pagination" id="paginacion" style="display: none;">
                <button onclick="cambiarPagina('primera')" title="Primera página">
                    <i class="fas fa-angle-double-left"></i>
                </button>
                <button onclick="cambiarPagina('anterior')" title="Página anterior">
                    <i class="fas fa-angle-left"></i>
                </button>
                <span class="pagination-info">
                    Página <span id="paginaActual">1</span> de <span id="totalPaginas">1</span>
                </span>
                <button onclick="cambiarPagina('siguiente')" title="Página siguiente">
                    <i class="fas fa-angle-right"></i>
                </button>
                <button onclick="cambiarPagina('ultima')" title="Última página">
                    <i class="fas fa-angle-double-right"></i>
                </button>
            </div>
        </div>
    </main>

    <!-- Cargar el JS del menú reutilizable -->
    <script src="../js/menu-component.js"></script>

    
    <!-- Script específico del listado de solicitudes -->
    <script src="../js/ssl-rs-listado-solicitud-pedido.js"></script>
        
    <!-- Script para cargar el menú y configuración específica de esta página -->
    <script>
        // Cargar el menú cuando el DOM esté listo
        SSLMenu.load('recepcion-solicitudes', 'listado-solicitudes');
    </script>

</body>
</html>