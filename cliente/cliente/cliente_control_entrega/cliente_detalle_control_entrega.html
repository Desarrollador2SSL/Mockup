<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalle Control de Entrega - SSL v4.0</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Archivo CSS del menú separado -->
    <link rel="stylesheet" href="../css/menu-styles.css">
    <link rel="stylesheet" href="css/cliente-det-ctrl-entrega-styles.css">
    <style>
        /* Estilos adicionales para tabs */
        .tabs-container {
            background-color: white;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            margin-bottom: 25px;
            overflow: hidden;
        }

        .tabs-header {
            display: flex;
            background-color: #f8f9fa;
            border-bottom: 2px solid var(--border-color);
        }

        .tab-button {
            flex: 1;
            padding: 15px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            color: #666;
            transition: all var(--transition-speed);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .tab-button:hover {
            background-color: #e9ecef;
            color: var(--secondary-color);
        }

        .tab-button.active {
            background-color: white;
            color: var(--secondary-color);
            font-weight: 600;
        }

        .tab-button.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(to right, var(--secondary-color), var(--accent-color));
        }

        .tab-content {
            display: none;
            padding: 25px;
            animation: fadeIn 0.3s ease-in-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Filtro de estado */
        .filter-section {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }

        .filter-label {
            font-weight: 500;
            color: var(--text-color);
        }

        .filter-select {
            padding: 8px 15px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all var(--transition-speed);
        }

        .filter-select:hover {
            border-color: var(--secondary-color);
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        /* Estado badges mejorados */
        .estado-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .estado-badge.recepcionada {
            background-color: #d4edda;
            color: #155724;
        }

        .estado-badge.programada {
            background-color: #d1ecf1;
            color: #0c5460;
        }

        .estado-badge.sin-programar {
            background-color: #f8d7da;
            color: #721c24;
        }

        /* Tabla de entregas mejorada */
        .entregas-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95rem;
        }

        .entregas-table th {
            background-color: #f8f9fa;
            padding: 12px;
            text-align: left;
            font-weight: 600;
            color: var(--text-color);
            border-bottom: 2px solid var(--border-color);
        }

        .entregas-table td {
            padding: 12px;
            border-bottom: 1px solid #eee;
            vertical-align: middle;
        }

        .entregas-table tbody tr:hover {
            background-color: #f8f9fa;
        }

        /* Incidentes table */
        .incidentes-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95rem;
        }

        .incidentes-table th {
            background-color: #f8f9fa;
            padding: 12px;
            text-align: left;
            font-weight: 600;
            color: var(--text-color);
            border-bottom: 2px solid var(--border-color);
        }

        .incidentes-table td {
            padding: 12px;
            border-bottom: 1px solid #eee;
            vertical-align: middle;
        }

        .prioridad-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .prioridad-badge.alta {
            background-color: #f8d7da;
            color: #721c24;
        }

        .prioridad-badge.media {
            background-color: #fff3cd;
            color: #856404;
        }

        .prioridad-badge.baja {
            background-color: #d1ecf1;
            color: #0c5460;
        }

        .incidente-actions {
            display: flex;
            gap: 5px;
        }

        /* Responsive tabs */
        @media (max-width: 768px) {
            .tabs-header {
                flex-direction: column;
            }

            .tab-button {
                text-align: left;
                justify-content: flex-start;
                padding: 12px 20px;
                border-bottom: 1px solid var(--border-color);
            }

            .tab-button.active::after {
                display: none;
            }

            .tab-button.active::before {
                content: '';
                position: absolute;
                left: 0;
                top: 0;
                bottom: 0;
                width: 4px;
                background: linear-gradient(to bottom, var(--secondary-color), var(--accent-color));
            }

            .filter-section {
                flex-direction: column;
                align-items: stretch;
            }

            .entregas-table {
                font-size: 0.85rem;
            }

            .entregas-table th,
            .entregas-table td {
                padding: 8px;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-left">
            <div class="menu-toggle" onclick="toggleMobileMenu()">
                <i class="fas fa-bars"></i>
            </div>
            <div class="logo">
                <img src="../PagWebLocal/logo_ssl.png" alt="SSL Logo">
                <div class="logo-text">
                    <h1>SSL v4.0</h1>
                    <span class="portal-type">Portal Cliente</span>
                </div>
            </div>
        </div>
        
        <div class="header-right">
            <div class="header-date">
                <i class="fas fa-calendar-alt"></i>
                <span id="currentDate">Cargando...</span>
            </div>

            <!-- AGREGAR ESTE BOTÓN DE AYUDA -->
            <div class="help-button-container">
                <a href="../cliente_navegacion.html" class="help-button" title="Ayuda y Navegación">
                    <i class="fas fa-question-circle"></i>
                    <span class="help-text">Ayuda</span>
                </a>
            </div>

            <div class="notifications">
                <button class="notifications-button" onclick="showNotifications()">
                    <i class="fas fa-bell"></i>
                </button>
                <span class="notification-count">5</span>
            </div>
            
            <div class="user-menu" id="userMenu">
                <div class="user-avatar">
                    <span id="userInitial">C</span>
                </div>
                <span class="user-name" id="userName">Empresa Demo S.A.</span>
                <i class="fas fa-chevron-down user-menu-arrow"></i>
                
                <div class="user-dropdown">
                    <div class="dropdown-header">
                        <div class="dropdown-user-info">
                            <div class="dropdown-avatar">
                                <span id="dropdownUserInitial">C</span>
                            </div>
                            <div class="dropdown-user-details">
                                <div class="dropdown-user-name" id="dropdownUserName">Empresa Demo S.A.</div>
                                <div class="dropdown-user-email" id="dropdownUserEmail">cliente@demo.com</div>
                            </div>
                        </div>
                    </div>
                    <div class="dropdown-menu">
                        <a href="#" class="dropdown-item" onclick="goToProfile(event)">
                            <i class="fas fa-user-circle"></i>
                            <span>Mi Perfil</span>
                        </a>
                        <a href="#" class="dropdown-item" onclick="goToSettings(event)">
                            <i class="fas fa-cog"></i>
                            <span>Configuración</span>
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item logout" onclick="logout(event)">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>Cerrar Sesión</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="container">

        
        <!-- Control Entregas   -->
        <nav class="sidebar" id="sidebar">
            <ul class="menu">

                <!-- Dashboard -->
                <li class="menu-item">
                    <div class="menu-header" onclick="window.location.href='../cliente_dashboard.html'">
                        <i class="fas fa-home"></i>
                        <span>Dashboard</span>
                        <div class="menu-tooltip">Dashboard</div>
                    </div>
                </li>

                <!-- Central de Mensajería -->
                <li class="menu-item">
                    <div class="menu-header" onclick="window.location.href='../cliente_mensajeria/cliente_listado_mensajeria.html'">
                        <i class="fas fa-comments"></i>
                        <span>Central de Mensajería</span>
                        <div class="menu-tooltip">Central de Mensajería</div>
                    </div>
                </li>

                <!-- Solicitudes y Cotizaciones -->
                <li class="menu-item">
                    <div class="menu-header" onclick="toggleSubmenu(this)">
                        <i class="fas fa-file-alt"></i>
                        <span>Cotización y Compra</span>
                        <i class="fas fa-chevron-right arrow"></i>
                        <div class="menu-tooltip">Cotización y Compra</div>
                    </div>
                    <div class="submenu">
                        <a href="cliente_listado_solicitudes.html" class="submenu-item">
                            <span class="full-text">Solicitudes de Pedido</span>
                            <span class="siglas">SP</span>
                            <div class="sigla-tooltip">Solicitudes de Pedido</div>
                        </a>
                        <a href="../cliente_cotizaciones/cliente_listado_cotizaciones.html" class="submenu-item">
                            <span class="full-text">Cotizaciones</span>
                            <span class="siglas">CO</span>
                            <div class="sigla-tooltip">Cotizaciones</div>
                        </a>
                        <a href="../cliente_orden_compra/cliente_listado_ordenes_compra.html" class="submenu-item">
                            <span class="full-text">Órdenes de Compra</span>
                            <span class="siglas">OC</span>
                            <div class="sigla-tooltip">Órdenes de Compra</div>
                        </a>
                    </div>
                </li>

                <!-- Control de Entregas (active) -->
                <li class="menu-item active">
                    <div class="menu-header active" onclick="toggleSubmenu(this)">
                        <i class="fas fa-truck"></i>
                        <span>Control de Entregas</span>
                        <i class="fas fa-chevron-right arrow"></i>
                        <div class="menu-tooltip">Control de Entregas</div>
                    </div>
                    <div class="submenu">
                        <a href="../cliente_control_entrega/cliente_listado_control_entregas.html" class="submenu-item active">
                            <span class="full-text">Control Entrega por OC</span>
                            <span class="siglas">CEO</span>
                            <div class="sigla-tooltip">Control Entrega por OC</div>
                        </a>

                        <a href="../cliente_modificaciones/cliente_listado_modificaciones.html" class="submenu-item">
                            <span class="full-text">Modificaciones OC</span>
                            <span class="siglas">MOC</span>
                            <div class="sigla-tooltip">Modificaciones OC</div>
                        </a>

                        <a href="../cliente_control_recepcion/cliente_listado_despachos.html" class="submenu-item">
                            <span class="full-text">Control Recepción</span>
                            <span class="siglas">CRE</span>
                            <div class="sigla-tooltip">Control Recepción</div>
                        </a>

                        <a href="../cliente_incidentes/cliente_listado_incidentes.html" class="submenu-item">
                            <span class="full-text">Incidentes de Entrega</span>
                            <span class="siglas">IEN</span>
                            <div class="sigla-tooltip">Incidentes de Entrega</div>
                        </a>                        
                    </div>
                </li>
               
                <!-- Pagos -->
                <li class="menu-item">
                    <div class="menu-header" onclick="toggleSubmenu(this)">
                        <i class="fas fa-file-invoice-dollar"></i>
                        <span>Pagos</span>
                        <i class="fas fa-chevron-right arrow"></i>
                        <div class="menu-tooltip">Pagos</div>
                    </div>
                    <div class="submenu">
                        <a href="../cliente_pagos/cliente_listado_pagos.html" class="submenu-item">
                            <span class="full-text">Estado de Pagos</span>
                            <span class="siglas">EP</span>
                            <div class="sigla-tooltip">Estado de Pagos</div>
                        </a>                          
                    </div>
                </li>

                <!-- Control Total de Obras -->
                <li class="menu-item">
                    <div class="menu-header" onclick="toggleSubmenu(this)">
                        <i class="fas fa-hard-hat"></i>
                        <span>Control Total de Obras</span>
                        <i class="fas fa-chevron-right arrow"></i>
                        <div class="menu-tooltip">Control Total de Obras</div>
                    </div>
                    <div class="submenu">
                        <a href="../cliente_control_obra/cliente_listado_obras_control.html" class="submenu-item">
                            <span class="full-text">Listado de Obras</span>
                            <span class="siglas">LO</span>
                            <div class="sigla-tooltip">Listado de Obras</div>
                        </a>
                    </div>
                </li>
                
                <!-- Configuración -->
                <li class="menu-item">
                    <div class="menu-header" onclick="toggleSubmenu(this)">
                        <i class="fas fa-cog"></i>
                        <span>Configuración</span>
                        <i class="fas fa-chevron-right arrow"></i>
                        <div class="menu-tooltip">Configuración</div>
                    </div>
                    <div class="submenu">
                        <a href="../cliente_configuracion/cliente_listado_obras.html" class="submenu-item">
                            <span class="full-text">Administración de Obras / Proyectos</span>
                            <span class="siglas">AOP</span>
                            <div class="sigla-tooltip">Administración de Obras / Proyectos</div>
                        </a>
                        <a href="../cliente_configuracion/cliente_listado_usuarios.html" class="submenu-item">
                            <span class="full-text">Administración de Usuarios</span>
                            <span class="siglas">AU</span>
                            <div class="sigla-tooltip">Administración de Usuarios</div>
                        </a>
                    </div>
                </li>
            </ul>
        </nav>

        <!-- Toggle Button (fuera del sidebar) -->
        <div class="sidebar-toggle" onclick="toggleSidebar()">
            <i class="fas fa-chevron-left"></i>
        </div>

        <main class="content">
            <div class="breadcrumb">
                <div class="breadcrumb-item"><a href="../cliente_dashboard.html">Inicio</a></div>
                <div class="breadcrumb-item"><a href="#">Control de Entregas</a></div>
                <div class="breadcrumb-item"><a href="cliente_listado_control_entregas.html">Control Entrega por OC</a></div>
                <div class="breadcrumb-item active">Detalle Control de Entrega</div>
            </div>

            <div class="page-header">
                <div>
                    <h1 class="page-title">Detalle Control de Entrega por OC</h1>
                    <div class="oc-info">
                        <span>N° OC Cliente: <strong id="numeroOCCliente">4500873120</strong></span>
                        <span>N° OC SSL: <strong id="numeroOCSSL">OC-2025-0145</strong></span>
                        <span>Proveedor: <strong>SSL</strong></span>
                    </div>
                </div>
                <div class="page-actions">
                    <button class="btn btn-secondary" onclick="verDetalleOC()">
                        <i class="fas fa-eye"></i>
                        Ver OC Completa
                    </button>
                    <button class="btn btn-primary" onclick="imprimirControl()">
                        <i class="fas fa-print"></i>
                        Imprimir
                    </button>
                </div>
            </div>

            <!-- Información de la OC -->
            <div class="form-section">
                <h2 class="section-title">
                    <i class="fas fa-file-alt"></i>
                    Información de la Orden de Compra
                </h2>
                <div class="detail-row">
                    <div class="detail-group">
                        <div class="detail-label">Fecha de OC</div>
                        <div class="detail-value">20/06/2025</div>
                    </div>
                    <div class="detail-group">
                        <div class="detail-label">Obra/Proyecto</div>
                        <div class="detail-value">Torre Providencia - Edificio A</div>
                    </div>
                    <div class="detail-group">
                        <div class="detail-label">Contacto de Entrega</div>
                        <div class="detail-value">Nelson Andrade - Tel: 9-42262912</div>
                    </div>
                    <div class="detail-group">
                        <div class="detail-label">Dirección de Entrega</div>
                        <div class="detail-value">Lomas del Bosque 2, Bodega de Obra</div>
                    </div>
                </div>
            </div>

            <!-- Tabs Container -->
            <div class="tabs-container">
                <div class="tabs-header">
                    <button class="tab-button active" onclick="showTab('resumen')">
                        <i class="fas fa-chart-line"></i>
                        Resumen de Productos por Entrega
                    </button>
                    <button class="tab-button" onclick="showTab('listado')">
                        <i class="fas fa-list-alt"></i>
                        Planificación Entrega de Productos
                    </button>
                    <button class="tab-button" onclick="showTab('incidentes')">
                        <i class="fas fa-exclamation-triangle"></i>
                        Listado de Incidentes
                    </button>
                </div>

                <!-- Tab 1: Resumen de Productos por Entrega -->
                <div id="resumen-tab" class="tab-content active">
                    <!-- Tabla de Resumen -->
                    <div style="overflow-x: auto;">
                        <table class="products-summary-table">
                            <thead>
                                <tr>
                                    <th rowspan="2">Entrega</th>
                                    <th rowspan="2">Código Cliente</th>
                                    <th rowspan="2">Descripción</th>
                                    <th rowspan="2">U.M.</th>
                                    <th colspan="5" style="text-align: center; background-color: #e9ecef;">Cantidades</th>
                                    <th rowspan="2">% Entrega</th>
                                    <th rowspan="2">Recepciones</th>
                                </tr>
                                <tr>
                                    <th>Solicitada</th>
                                    <th>Entregada</th>
                                    <th>Incidencia</th>
                                    <th>Programada</th>
                                    <th>Pendiente</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Entrega 1 -->
                                <tr class="entrega-group-header">
                                    <td rowspan="4" class="entrega-cell">
                                        <div class="entrega-label">
                                            <strong>Entrega 1</strong><br>
                                            <small>18/06/2025</small><br>
                                            <span class="status-badge parcial" style="font-size: 0.75rem; padding: 3px 8px;">
                                                <i class="fas fa-truck-moving"></i> En Proceso
                                            </span>                                        
                                        </div>
                                    </td>
                                    <td>HOR-H25-001</td>
                                    <td>Hormigón H25</td>
                                    <td>m³</td>
                                    <td class="text-center">250</td>
                                    <td class="text-center text-success">150</td>
                                    <td class="text-center">-</td>
                                    <td class="text-center text-planned">100</td>
                                    <td class="text-center">-</td>
                                    <td class="text-center">
                                        <div class="progress-cell">
                                            <div class="progress-bar-small">
                                                <div class="progress-fill-small" style="width: 60%;"></div>
                                            </div>
                                            <span class="progress-text">60%</span>
                                        </div>
                                    </td>
                                    <td rowspan="4" class="actions-cell">
                                        <a href="../cliente_control_recepcion/cliente_detalle_despacho.html?lpe=LPE-2025-001" onclick="verDocumento('LPE-2025-001')">LPE-2025-001</a>
                                        <br>
                                        <a href="../cliente_control_recepcion/cliente_detalle_despacho.html?lpe=LPE-2025-002" onclick="verDocumento('LPE-2025-002')">LPE-2025-002</a>
                                        <!--button class="btn btn-sm btn-primary" onclick="verDetalleRecepcion('entrega-1')">
                                            <i class="fas fa-eye"></i> Ver Detalle
                                        </button-->
                                    </td>
                                </tr>
                                <tr>
                                    <td>HOR-H30-001</td>
                                    <td>Hormigón H30</td>
                                    <td>m³</td>
                                    <td class="text-center">100</td>
                                    <td class="text-center text-success">100</td>
                                    <td class="text-center">-</td>
                                    <td class="text-center">-</td>
                                    <td class="text-center">-</td>
                                    <td class="text-center">
                                        <div class="progress-cell">
                                            <div class="progress-bar-small">
                                                <div class="progress-fill-small" style="width: 100%;"></div>
                                            </div>
                                            <span class="progress-text">100%</span>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>BAR-10MM</td>
                                    <td>Barra de Acero 10mm</td>
                                    <td>un</td>
                                    <td class="text-center">200</td>
                                    <td class="text-center text-success">200</td>
                                    <td class="text-center text-warning">20</td>
                                    <td class="text-center">-</td>
                                    <td class="text-center">-</td>
                                    <td class="text-center">
                                        <div class="progress-cell">
                                            <div class="progress-bar-small">
                                                <div class="progress-fill-small" style="width: 100%;"></div>
                                            </div>
                                            <span class="progress-text">100%</span>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>BAR-12MM</td>
                                    <td>Barra de Acero 12mm</td>
                                    <td>un</td>
                                    <td class="text-center">200</td>
                                    <td class="text-center text-success">200</td>
                                    <td class="text-center">-</td>
                                    <td class="text-center">-</td>
                                    <td class="text-center">-</td>
                                    <td class="text-center">
                                        <div class="progress-cell">
                                            <div class="progress-bar-small">
                                                <div class="progress-fill-small" style="width: 100%;"></div>
                                            </div>
                                            <span class="progress-text">100%</span>
                                        </div>
                                    </td>
                                </tr>
                                
                                <!-- Separador -->
                                <tr class="separator-row">
                                    <td colspan="11"></td>
                                </tr>
                                
                                <!-- Entrega 2 -->
                                <tr class="entrega-group-header">
                                    <td rowspan="2" class="entrega-cell">
                                        <div class="entrega-label">
                                            <strong>Entrega 2</strong><br>
                                            <small>15/07/2025</small><br>
                                            <span class="status-badge parcial" style="font-size: 0.75rem; padding: 3px 8px;">
                                                <i class="fas fa-truck-moving"></i> En Proceso
                                            </span>
                                        </div>
                                    </td>
                                    <td>TUB-PVC-110</td>
                                    <td>Tubo PVC 110mm</td>
                                    <td>un</td>
                                    <td class="text-center">30</td>
                                    <td class="text-center text-success">12</td>
                                    <td class="text-center">-</td>
                                    <td class="text-center text-planned">18</td>
                                    <td class="text-center">-</td>
                                    <td class="text-center">
                                        <div class="progress-cell">
                                            <div class="progress-bar-small">
                                                <div class="progress-fill-small" style="width: 40%;"></div>
                                            </div>
                                            <span class="progress-text">40%</span>
                                        </div>
                                    </td>
                                    <td rowspan="2" class="actions-cell">
                                        <a href="../cliente_control_recepcion/cliente_detalle_despacho.html?lpe=LPE-2025-003" onclick="verDocumento('LPE-2025-003')">LPE-2025-003</a>
                                        <!--button class="btn btn-sm btn-primary" onclick="verDetalleRecepcion('entrega-2')">
                                            <i class="fas fa-eye"></i> Ver Detalle
                                        </button-->
                                    </td>
                                </tr>
                                <tr>
                                    <td>TUB-PVC-160</td>
                                    <td>Tubo PVC 160mm</td>
                                    <td>un</td>
                                    <td class="text-center">20</td>
                                    <td class="text-center">-</td>
                                    <td class="text-center">-</td>
                                    <td class="text-center text-planned">20</td>
                                    <td class="text-center">-</td>
                                    <td class="text-center">
                                        <div class="progress-cell">
                                            <div class="progress-bar-small">
                                                <div class="progress-fill-small" style="width: 0%;"></div>
                                            </div>
                                            <span class="progress-text">0%</span>
                                        </div>
                                    </td>
                                </tr>
                                
                                <!-- Separador -->
                                <tr class="separator-row">
                                    <td colspan="11"></td>
                                </tr>
                                
                                <!-- Entrega 3 -->
                                <tr class="entrega-group-header">
                                    <td rowspan="2" class="entrega-cell">
                                        <div class="entrega-label">
                                            <strong>Entrega 3</strong><br>
                                            <small>15/09/2025</small><br>
                                            <span class="status-badge pendiente" style="font-size: 0.75rem; padding: 3px 8px;">
                                                <i class="fas fa-clock"></i> Pendiente
                                            </span>
                                        </div>
                                    </td>
                                    <td>BAR-10MM</td>
                                    <td>Barra de Acero 10mm</td>
                                    <td>un</td>
                                    <td class="text-center">200</td>
                                    <td class="text-center">-</td>
                                    <td class="text-center">-</td>
                                    <td class="text-center text-planned">200</td>
                                    <td class="text-center">-</td>
                                    <td class="text-center">
                                        <div class="progress-cell">
                                            <div class="progress-bar-small">
                                                <div class="progress-fill-small" style="width: 0%;"></div>
                                            </div>
                                            <span class="progress-text">0%</span>
                                        </div>
                                    </td>
                                    <td rowspan="2" class="actions-cell">
                                        <!--button class="btn btn-sm btn-primary" onclick="verDetalleRecepcion('entrega-3')">
                                            <i class="fas fa-eye"></i> Ver Detalle
                                        </button-->-
                                    </td>
                                </tr>
                                <tr>
                                    <td>BAR-12MM</td>
                                    <td>Barra de Acero 12mm</td>
                                    <td>un</td>
                                    <td class="text-center">200</td>
                                    <td class="text-center">-</td>
                                    <td class="text-center">-</td>
                                    <td class="text-center text-planned">100</td>
                                    <td class="text-center text-danger">100</td>
                                    <td class="text-center">
                                        <div class="progress-cell">
                                            <div class="progress-bar-small">
                                                <div class="progress-fill-small" style="width: 0%;"></div>
                                            </div>
                                            <span class="progress-text">0%</span>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Leyenda -->
                    <div style="margin-top: 15px; display: flex; gap: 20px; font-size: 0.85rem; color: #666;">
                        <div><i class="fas fa-circle text-success"></i> Entregado</div>
                        <div><i class="fas fa-circle text-warning"></i> Con Incidencia</div>
                        <div><i class="fas fa-circle text-planned"></i> Programada</div>
                        <div><i class="fas fa-circle text-danger"></i> Pendiente</div>
                    </div>
                </div>

                <!-- Tab 2: Listado de Productos por Entregar -->
                <div id="listado-tab" class="tab-content">
                    <!-- Filtro de estado -->
                    <div class="filter-section">
                        <label class="filter-label">Filtrar por Estado de Entrega:</label>
                        <select class="filter-select" id="estadoFilter" onchange="filtrarEntregas()">
                            <option value="todos">Todos</option>
                            <option value="recepcionada">Recepcionada</option>
                            <option value="programada">Programada</option>
                            <option value="por-programar">Por Programar</option>
                            <option value="sin-programar">Sin Programar</option>
                        </select>
                    </div>

                    <!-- Tabla de entregas -->
                    <div style="overflow-x: auto;">
                        <table class="entregas-table">
                            <thead>
                                <tr>
                                    <th>Entrega N°</th>
                                    <th>Código Cliente</th>
                                    <th>Descripción</th>
                                    <th>U.M.</th>
                                    <th>Fecha Solicitada</th>
                                    <th>Estado Entrega</th>
                                    <th>Fecha Entrega</th>
                                    <th>Cantidad</th>
                                    <th>Incidentes</th>
                                    <th>Referencia</th>
                                </tr>
                            </thead>
                          
                            <tbody id="entregasTableBody">
                                <!-- Entregas recepcionadas -->
                                <tr data-estado="recepcionada">
                                    <td>1</td>
                                    <td>HOR-H25-001</td>
                                    <td>Hormigón H25</td>
                                    <td>m³</td>
                                    <td>18/06/2025</td>
                                    <td><span class="estado-badge recepcionada"><i class="fas fa-check-circle"></i> Recepcionada</span></td>
                                    <td>22/06/2025</td>
                                    <td class="text-center text-success">150</td>
                                    <td class="text-center">-</td>
                                    <td>
                                        <a href="../cliente_control_recepcion/cliente_detalle_despacho.html?lpe=LPE-2025-001" onclick="verDocumento('LPE-2025-001')">LPE-2025-001</a>
                                    </td>
                                </tr>
                                <tr data-estado="recepcionada">
                                    <td>1</td>
                                    <td>HOR-H30-001</td>
                                    <td>Hormigón H30</td>
                                    <td>m³</td>
                                    <td>18/06/2025</td>
                                    <td><span class="estado-badge recepcionada"><i class="fas fa-check-circle"></i> Recepcionada</span></td>
                                    <td>25/06/2025</td>
                                    <td class="text-center text-success">100</td>
                                    <td class="text-center">-</td>
                                    <td>
                                        <a href="../cliente_control_recepcion/cliente_detalle_despacho.html?lpe=LPE-2025-002" onclick="verDocumento('LPE-2025-002')">LPE-2025-002</a>
                                    </td>
                                </tr>
                                <tr data-estado="recepcionada">
                                    <td>1</td>
                                    <td>BAR-10MM</td>
                                    <td>Barra de Acero 10mm</td>
                                    <td>un</td>
                                    <td>18/06/2025</td>
                                    <td><span class="estado-badge recepcionada"><i class="fas fa-check-circle"></i> Recepcionada</span></td>
                                    <td>25/06/2025</td>
                                    <td class="text-center text-success">200</td>
                                    <td><span class="text-warning">1</span></td>
                                    <td>
                                        <a href="../cliente_control_recepcion/cliente_detalle_despacho.html?lpe=LPE-2025-002" onclick="verDocumento('LPE-2025-002')">LPE-2025-002</a>
                                    </td>
                                </tr>
                                <tr data-estado="recepcionada">
                                    <td>1</td>
                                    <td>BAR-12MM</td>
                                    <td>Barra de Acero 12mm</td>
                                    <td>un</td>
                                    <td>18/06/2025</td>
                                    <td><span class="estado-badge recepcionada"><i class="fas fa-check-circle"></i> Recepcionada</span></td>
                                    <td>25/06/2025</td>
                                    <td class="text-center text-success">200</td>
                                    <td class="text-center">-</td>
                                    <td>
                                        <a href="../cliente_control_recepcion/cliente_detalle_despacho.html?lpe=LPE-2025-002" onclick="verDocumento('LPE-2025-002')">LPE-2025-002</a>
                                    </td>                                    
                                </tr>
                                <tr data-estado="recepcionada">
                                    <td>2</td>
                                    <td>TUB-PVC-110</td>
                                    <td>Tubo PVC 110mm</td>
                                    <td>un</td>
                                    <td>15/07/2025</td>
                                    <td><span class="estado-badge recepcionada"><i class="fas fa-check-circle"></i> Recepcionada</span></td>
                                    <td>20/08/2025</td>
                                    <td class="text-center text-success">12</td>
                                    <td class="text-center">-</td>
                                    <td>
                                        <a href="../cliente_control_recepcion/cliente_detalle_despacho.html?lpe=LPE-2025-003" onclick="verDocumento('LPE-2025-003')">LPE-2025-003</a>
                                    </td>                                    
                                </tr>
                                
                                <!-- Entregas programadas -->
                                <tr data-estado="programada">
                                    <td>1</td>
                                    <td>HOR-H25-001</td>
                                    <td>Hormigón H25</td>
                                    <td>m³</td>
                                    <td>18/06/2025</td>
                                    <td><span class="estado-badge programada"><i class="fas fa-truck"></i> Programada</span></td>
                                    <td>30/07/2025</td>
                                    <td class="text-center text-planned">100</td>
                                    <td class="text-center">-</td>
                                    <td>En plazo</td>
                                </tr>
                                <tr data-estado="programada">
                                    <td>2</td>
                                    <td>TUB-PVC-110</td>
                                    <td>Tubo PVC 110mm</td>
                                    <td>un</td>
                                    <td>15/07/2025</td>
                                    <td><span class="estado-badge programada"><i class="fas fa-truck"></i> Programada</span></td>
                                    <td>25/08/2025</td>
                                    <td class="text-center text-planned">18</td>
                                    <td class="text-center">-</td>
                                    <td>En plazo</td>
                                </tr>
                                <tr data-estado="programada">
                                    <td>2</td>
                                    <td>TUB-PVC-160</td>
                                    <td>Tubo PVC 160mm</td>
                                    <td>un</td>
                                    <td>15/07/2025</td>
                                    <td><span class="estado-badge programada"><i class="fas fa-truck"></i> Programada</span></td>
                                    <td>25/08/2025</td>
                                    <td class="text-center text-planned">20</td>
                                    <td class="text-center">-</td>
                                    <td>En plazo</td>
                                </tr>
                                
                                <!-- Entregas por programar -->
                                <tr data-estado="por-programar">
                                    <td>3</td>
                                    <td>BAR-10MM</td>
                                    <td>Barra de Acero 10mm</td>
                                    <td>un</td>
                                    <td>15/09/2025</td>
                                    <td><span class="estado-badge por-programar"><i class="fas fa-calendar-plus"></i> Por Programar</span></td>
                                    <td>15/09/2025</td>
                                    <td class="text-center text-planned">200</td>
                                    <td class="text-center">-</td>
                                    <td>En plazo</td>
                                </tr>
                                <tr data-estado="por-programar">
                                    <td>3</td>
                                    <td>BAR-12MM</td>
                                    <td>Barra de Acero 12mm</td>
                                    <td>un</td>
                                    <td>15/09/2025</td>
                                    <td><span class="estado-badge por-programar"><i class="fas fa-calendar-plus"></i> Por Programar</span></td>
                                    <td>15/09/2025</td>
                                    <td class="text-center text-planned">100</td>
                                    <td class="text-center">-</td>
                                    <td>En plazo</td>
                                </tr>
                                
                                <!-- Entrega sin programar -->
                                <tr data-estado="sin-programar">
                                    <td>3</td>
                                    <td>BAR-12MM</td>
                                    <td>Barra de Acero 12mm</td>
                                    <td>un</td>
                                    <td>15/09/2025</td>
                                    <td><span class="estado-badge sin-programar"><i class="fas fa-times-circle"></i> Sin Programar</span></td>
                                    <td>Sin fecha</td>
                                    <td class="text-center text-danger">100</td>
                                    <td class="text-center">-</td>
                                    <td>Quiebre Stock Proveedor</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Tab 3: Listado de Incidentes -->
                <div id="incidentes-tab" class="tab-content">
                    <div style="margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center;">
                        <h3>Incidentes Registrados</h3>
                        <button class="btn btn-warning" onclick="nuevoIncidente()">
                            <i class="fas fa-plus"></i> Nuevo Incidente
                        </button>
                    </div>

                    <div style="overflow-x: auto;">
                        <table class="incidentes-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Fecha Reporte</th>
                                    <th>Entrega N°</th>
                                    <th>Producto</th>
                                    <th>Tipo</th>
                                    <th>Descripción</th>
                                    <th>Estado</th>
                                    <th>Prioridad</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>INC-2025-001</td>
                                    <td>25/06/2025</td>
                                    <td>1</td>
                                    <td>BAR-10MM</td>
                                    <td>Calidad</td>
                                    <td>Algunas barras de acero de 10mm presentaban oxidación superficial</td>
                                    <td><span class="estado-badge recepcionada">Resuelto</span></td>
                                    <td><span class="prioridad-badge media">Media</span></td>
                                    <td>
                                        <div class="incidente-actions">
                                            <button class="btn btn-sm btn-secondary" onclick="verIncidente('INC-2025-001')">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>INC-2025-002</td>
                                    <td>20/08/2025</td>
                                    <td>2</td>
                                    <td>TUB-PVC-110</td>
                                    <td>Cantidad</td>
                                    <td>Entrega parcial - faltan 18 unidades por despachar</td>
                                    <td><span class="estado-badge programada">En Proceso</span></td>
                                    <td><span class="prioridad-badge baja">Baja</span></td>
                                    <td>
                                        <div class="incidente-actions">
                                            <button class="btn btn-sm btn-secondary" onclick="verIncidente('INC-2025-002')">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button class="btn btn-sm btn-primary" onclick="editarIncidente('INC-2025-002')">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Resumen de incidentes -->
                    <div style="margin-top: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 8px;">
                        <h4 style="margin-bottom: 10px;">Resumen</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <div>
                                <span style="color: #666;">Total de Incidentes:</span>
                                <strong style="margin-left: 5px;">2</strong>
                            </div>
                            <div>
                                <span style="color: #666;">Resueltos:</span>
                                <strong style="margin-left: 5px; color: var(--success-color);">1</strong>
                            </div>
                            <div>
                                <span style="color: #666;">En Proceso:</span>
                                <strong style="margin-left: 5px; color: var(--warning-color);">1</strong>
                            </div>
                            <div>
                                <span style="color: #666;">Pendientes:</span>
                                <strong style="margin-left: 5px; color: var(--error-color);">0</strong>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Documentación General -->
            <div class="form-section">
                <h2 class="section-title">
                    <i class="fas fa-folder-open"></i>
                    Documentación General
                </h2>
                <div class="documents-list">
                    <div class="document-item">
                        <div class="document-info">
                            <i class="fas fa-file-contract"></i>
                            <span>Orden de Compra Original (OC-2025-0145)</span>
                        </div>
                        <div class="document-actions">
                            <button class="btn btn-sm btn-secondary" onclick="verDocumento('OC-2025-0145')">
                                <i class="fas fa-download"></i> Descargar
                            </button>
                        </div>
                    </div>
                    <div class="document-item">
                        <div class="document-info">
                            <i class="fas fa-file-excel"></i>
                            <span>Reporte de Recepciones - Excel</span>
                        </div>
                        <div class="document-actions">
                            <button class="btn btn-sm btn-success" onclick="exportarExcel()">
                                <i class="fas fa-file-excel"></i> Exportar
                            </button>
                        </div>
                    </div>
                    <div class="document-item">
                        <div class="document-info">
                            <i class="fas fa-file-pdf"></i>
                            <span>Certificados de Calidad</span>
                        </div>
                        <div class="document-actions">
                            <button class="btn btn-sm btn-secondary" onclick="verCertificados()">
                                <i class="fas fa-certificate"></i> Ver Certificados
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script src="js/cliente_detalle_control_entrega.js"></script>
    <script>
        // Funciones adicionales para tabs
        function showTab(tabName) {
            // Ocultar todos los tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Desactivar todos los botones
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });
            
            // Mostrar el tab seleccionado
            document.getElementById(tabName + '-tab').classList.add('active');
            
            // Activar el botón correspondiente
            event.target.classList.add('active');
        }

        function filtrarEntregas() {
            const filter = document.getElementById('estadoFilter').value;
            const rows = document.querySelectorAll('#entregasTableBody tr');
            
            rows.forEach(row => {
                if (filter === 'todos' || row.dataset.estado === filter) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        function verDetalleRecepcion(entregaId) {
            // Redirigir a página de detalle de recepción
            window.location.href = `cliente_detalle_recepcion.html?entrega=${entregaId}&oc=${ocNumber}`;
        }

        function nuevoIncidente() {
            alert('Abriendo formulario de nuevo incidente...\n\n' +
                  'Se podrá registrar:\n' +
                  '• Tipo de incidente\n' +
                  '• Producto afectado\n' +
                  '• Descripción detallada\n' +
                  '• Evidencia fotográfica\n' +
                  '• Prioridad\n' +
                  '• Acciones requeridas');
        }

        function verIncidente(incidenteId) {
            alert(`Mostrando detalle del incidente ${incidenteId}\n\n` +
                  'Esta funcionalidad mostrará:\n' +
                  '• Información completa del incidente\n' +
                  '• Historial de seguimiento\n' +
                  '• Documentos adjuntos\n' +
                  '• Acciones tomadas');
        }

        function editarIncidente(incidenteId) {
            alert(`Editando incidente ${incidenteId}\n\n` +
                  'Se podrá actualizar:\n' +
                  '• Estado del incidente\n' +
                  '• Agregar comentarios\n' +
                  '• Adjuntar nueva documentación\n' +
                  '• Cambiar prioridad');
        }

    </script>

</body>
</html>